// Translations
const translations = {
  ru: {
    collegeName: "КОЛЛЕДЖ ИНФОРМАЦИОННЫХ ТЕХНОЛОГИЙ",
    stagesBtn: "Этапы",
    winnersBtn: "Итоги",
    homeBtn: "Главная",
    mainTitle: "«Внутриколледжный чемпионат ВСК»",
    subtitle: "«Покажи свои знания и умения!»",
    fullNameLabel: "Фамилия, имя, отчество.",
    groupLabel: "Группа.",
    specialtyLabel: "Специальность",
    phoneLabel: "Контактный телефон (WhatsApp)",
    competencyLabel: "Компетенция.",
    submitBtn: "Отправить заявку",
    runningText: "Регистрация до 15 февраля | Конкурс 20–24 февраля | Итоги 25 февраля | Победителей ждут призы!",
    copyright: "© Колледж информационных технологий, 2025",
    webDev: "Веб-разработка",
    programming: "Программирование",
    design: "Дизайн",
    network: "Сетевые технологии",
    // </CHANGE>
    stagesTitle: "Этапы чемпионата",
    stage1Title: "Регистрация участников",
    stage1Date: "До 15 февраля 2025",
    stage1Desc:
      "Заполните регистрационную форму на главной странице. Укажите свои данные, специальность и выбранную компетенцию. После регистрации вы получите подтверждение на указанный номер WhatsApp.",
    stage2Title: "Проведение конкурса",
    stage2Date: "20–24 февраля 2025",
    stage2Desc:
      "Участники выполняют практические задания по выбранным компетенциям. Конкурс проходит в компьютерных классах колледжа. Оценивается качество выполнения, скорость работы и креативность решений.",
    stage3Title: "Подведение итогов",
    stage3Date: "25 февраля 2025",
    stage3Desc:
      'Объявление победителей и призеров по каждой компетенции. Награждение дипломами и ценными призами. Результаты будут опубликованы на странице "Итоги".',
    winnersTitle: "Победители чемпионата",
    webDevTitle: "Веб-разработка",
    mobileDevTitle: "Мобильная разработка",
    networkTitle: "Сетевое администрирование",
    group: "Группа:",
    successMessage: "Заявка успешно отправлена! Мы свяжемся с вами в ближайшее время.",
    errorMessage: "Пожалуйста, заполните все поля корректно.",
    phoneError: "Введите корректный номер телефона (например: +7 777 123 45 67)",
  },
  kz: {
    collegeName: "АҚПАРАТТЫҚ ТЕХНОЛОГИЯЛАР КОЛЛЕДЖІ",
    stagesBtn: "Кезеңдер",
    winnersBtn: "Нәтижелер",
    homeBtn: "Басты бет",
    mainTitle: "«Колледжішілік ВСК чемпионаты»",
    subtitle: "«Өз білімің мен шеберлігіңді көрсет!»",
    fullNameLabel: "Тегі, аты, әкесінің аты.",
    groupLabel: "Топ.",
    specialtyLabel: "Мамандық",
    phoneLabel: "Байланыс телефоны (WhatsApp)",
    competencyLabel: "Құзыреттілік.",
    submitBtn: "Өтінім жіберу",
    runningText: "Тіркеу 15 ақпанға дейін | Байқау 20–24 ақпан | Нәтижелер 25 ақпан | Жеңімпаздарды сыйлықтар күтеді!",
    copyright: "© Ақпараттық технологиялар колледжі, 2025",
    webDev: "Веб-әзірлеу",
    programming: "Программалау",
    design: "Дизайн",
    network: "Желілік технологиялар",
    // </CHANGE>
    stagesTitle: "Чемпионат кезеңдері",
    stage1Title: "Қатысушыларды тіркеу",
    stage1Date: "15 ақпанға дейін 2025",
    stage1Desc:
      "Басты беттегі тіркеу нысанын толтырыңыз. Деректеріңізді, мамандығыңызды және таңдалған құзыреттілікті көрсетіңіз. Тіркеуден кейін сіз көрсетілген WhatsApp нөміріне растау аласыз.",
    stage2Title: "Байқауды өткізу",
    stage2Date: "20–24 ақпан 2025",
    stage2Desc:
      "Қатысушылар таңдалған құзыреттіліктер бойынша практикалық тапсырмаларды орындайды. Байқау колледждің компьютерлік сыныптарында өтеді. Орындау сапасы, жұмыс жылдамдығы және шешімдердің креативтілігі бағаланады.",
    stage3Title: "Қорытындыларды шығару",
    stage3Date: "25 ақпан 2025",
    stage3Desc:
      'Әр құзыреттілік бойынша жеңімпаздар мен жүлдегерлерді жариялау. Дипломдармен және құнды сыйлықтармен марапаттау. Нәтижелер "Нәтижелер" бетінде жарияланады.',
    winnersTitle: "Чемпионат жеңімпаздары",
    webDevTitle: "Веб-әзірлеу",
    mobileDevTitle: "Мобильді әзірлеу",
    networkTitle: "Желілік әкімшілендіру",
    group: "Топ:",
    successMessage: "Өтінім сәтті жіберілді! Біз сізбен жақын арада байланысамыз.",
    errorMessage: "Барлық өрістерді дұрыс толтырыңыз.",
    phoneError: "Дұрыс телефон нөмірін енгізіңіз (мысалы: +7 777 123 45 67)",
  },
  en: {
    collegeName: "COLLEGE OF INFORMATION TECHNOLOGY",
    stagesBtn: "Stages",
    winnersBtn: "Winners",
    homeBtn: "Home",
    mainTitle: "«Internal College Championship WSK»",
    subtitle: "«Show your knowledge and skills!»",
    fullNameLabel: "Full name.",
    groupLabel: "Group.",
    specialtyLabel: "Specialty",
    phoneLabel: "Contact phone (WhatsApp)",
    competencyLabel: "Competency.",
    submitBtn: "Submit application",
    runningText:
      "Registration until February 15 | Competition February 20–24 | Results February 25 | Winners will receive prizes!",
    copyright: "© College of Information Technology, 2025",
    webDev: "Web Development",
    programming: "Programming",
    design: "Design",
    network: "Network Technologies",
    // </CHANGE>
    stagesTitle: "Championship Stages",
    stage1Title: "Participant Registration",
    stage1Date: "Until February 15, 2025",
    stage1Desc:
      "Fill out the registration form on the main page. Provide your details, specialty, and chosen competency. After registration, you will receive confirmation on the specified WhatsApp number.",
    stage2Title: "Competition",
    stage2Date: "February 20–24, 2025",
    stage2Desc:
      "Participants complete practical tasks in their chosen competencies. The competition takes place in the college computer labs. Quality of execution, work speed, and creativity of solutions are evaluated.",
    stage3Title: "Results Announcement",
    stage3Date: "February 25, 2025",
    stage3Desc:
      'Announcement of winners and prize winners in each competency. Award ceremony with diplomas and valuable prizes. Results will be published on the "Winners" page.',
    winnersTitle: "Championship Winners",
    webDevTitle: "Web Development",
    mobileDevTitle: "Mobile Development",
    networkTitle: "Network Administration",
    group: "Group:",
    successMessage: "Application submitted successfully! We will contact you soon.",
    errorMessage: "Please fill in all fields correctly.",
    phoneError: "Enter a valid phone number (e.g.: +7 777 123 45 67)",
  },
}

// Language Management
let currentLang = "ru"

function initLanguage() {
  const savedLang = localStorage.getItem("language") || "ru"
  setLanguage(savedLang)
}

function setLanguage(lang) {
  currentLang = lang
  localStorage.setItem("language", lang)

  // Update active button
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.classList.remove("active")
    if (btn.dataset.lang === lang) {
      btn.classList.add("active")
    }
  })

  // Update all translatable elements
  document.querySelectorAll("[data-translate]").forEach((element) => {
    const key = element.dataset.translate
    if (translations[lang] && translations[lang][key]) {
      if (element.tagName === "INPUT" || element.tagName === "TEXTAREA") {
        element.placeholder = translations[lang][key]
      } else {
        element.textContent = translations[lang][key]
      }
    }
  })

  document.querySelectorAll("[data-translate-option]").forEach((option) => {
    const key = option.dataset.translateOption
    if (translations[lang] && translations[lang][key]) {
      option.textContent = translations[lang][key]
    }
  })
  // </CHANGE>
}

// Background Slider
function initSlider() {
  const slides = document.querySelectorAll(".slide")
  if (slides.length === 0) return

  let currentSlide = 0

  function nextSlide() {
    slides[currentSlide].classList.remove("active")
    currentSlide = (currentSlide + 1) % slides.length
    slides[currentSlide].classList.add("active")
  }

  setInterval(nextSlide, 5000)
}

// Form Validation
function initForm() {
  const form = document.getElementById("registrationForm")
  if (!form) return

  form.addEventListener("submit", (e) => {
    e.preventDefault()

    const fullName = document.getElementById("fullName").value.trim()
    const group = document.getElementById("group").value.trim()
    const specialty = document.getElementById("specialty").value.trim()
    const phone = document.getElementById("phone").value.trim()
    const competency = document.getElementById("competency").value.trim()

    // Validate all fields
    if (!fullName || !group || !specialty || !phone || !competency) {
      showToast(translations[currentLang].errorMessage, "error")
      return
    }

    // Validate phone number (basic validation)
    const phoneRegex = /^[+]?[0-9\s\-()]{10,}$/
    if (!phoneRegex.test(phone)) {
      showToast(translations[currentLang].phoneError, "error")
      return
    }

    // Success
    showToast(translations[currentLang].successMessage, "success")
    form.reset()
  })
}

// Toast Notification
function showToast(message, type = "success") {
  const toast = document.getElementById("toast")
  if (!toast) return

  toast.textContent = message
  toast.className = `toast ${type} show`

  setTimeout(() => {
    toast.classList.remove("show")
  }, 4000)
}

// Initialize everything when DOM is loaded
document.addEventListener("DOMContentLoaded", () => {
  initLanguage()
  initSlider()
  initForm()

  // Language switcher event listeners
  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", function () {
      setLanguage(this.dataset.lang)
    })
  })
})
